<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<title>CFO Approval</title>

<style>
body{font-family:Arial;background:#eef2f7;padding:40px;}
.container{background:white;padding:25px;border-radius:10px;
max-width:800px;margin:auto;box-shadow:0 4px 10px rgba(0,0,0,0.1);}
table{width:100%;border-collapse:collapse;margin-top:15px;}
th,td{border:1px solid #ddd;padding:10px;text-align:center;}
th{background:#4a90e2;color:white;}
button{padding:6px 12px;margin:3px;border:none;
background:#4a90e2;color:white;border-radius:4px;cursor:pointer;}
</style>
</head>

<body>

<div class="container">
<h2>CFO Pending Approvals</h2>

<table id="billTable">
<thead>
<tr>
<th>Employee</th>
<th>Amount</th>
<th>Manager Status</th>
<th>CFO Action</th>
</tr>
</thead>
<tbody></tbody>
</table>

<button onclick="goBack()">â¬… Back to Account Creation</button>


<button onclick="openAnalysis()">View Analysis</button>

<script>
function openAnalysis(){
    window.location.href = "analysis.html";
}

function goBack(){
    window.location.href = "account_creation.html";
}

</script>


</div>

<script>

let bills = JSON.parse(localStorage.getItem("bills")) || [];

function loadBills(){

const tbody = document.querySelector("#billTable tbody");
tbody.innerHTML="";

bills
.filter(b => b.managerApproved && !b.cfoDecision)
.forEach((bill,index)=>{

let row = tbody.insertRow();

row.innerHTML = `
<td>${bill.user}</td>
<td>${bill.amount}</td>
<td>Approved</td>
<td>
<button onclick="approve(${index})">Approve</button>
<button onclick="reject(${index})">Reject</button>
</td>
`;
});
}

function approve(i){
bills[i].cfoDecision="approved";
save();
}

function reject(i){
bills[i].cfoDecision="rejected";
save();
}

function save(){
localStorage.setItem("bills",JSON.stringify(bills));
loadBills();
}

loadBills();

</script>
</body>
</html>
